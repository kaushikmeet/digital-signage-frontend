{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\PlaylistBuilder.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../../api/services\";\nimport { socket } from \"../../socket/socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PlaylistBuilder({\n  playlistId\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [dragIndex, setDragIndex] = useState(null);\n  async function load() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n  useEffect(() => {\n    if (!playlistId) return;\n    socket.emit(\"register-playlist\", playlistId);\n    load();\n    socket.on(\"playlist-updated\", ({\n      playlistId: id\n    }) => {\n      if (id === playlistId) load();\n    });\n    return () => socket.off(\"playlist-updated\");\n  }, [playlistId]);\n  function moveItem(target) {\n    const updated = [...items];\n    const [moved] = updated.splice(dragIndex, 1);\n    updated.splice(target, 0, moved);\n    setItems(updated);\n    api.post(\"/playlists/reorder\", {\n      playlistId,\n      items: updated.map((i, idx) => ({\n        id: i._id,\n        position: idx\n      }))\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: items.map((i, index) => {\n      var _i$mediaId;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        draggable: true,\n        onDragStart: () => setDragIndex(index),\n        onDragOver: e => e.preventDefault(),\n        onDrop: () => moveItem(index),\n        className: \"border p-2 mb-1 cursor-move\",\n        children: [(_i$mediaId = i.mediaId) === null || _i$mediaId === void 0 ? void 0 : _i$mediaId.filename, \" \\u2014 \", i.duration, \"s\"]\n      }, i._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(PlaylistBuilder, \"2TywrsiHk9IyakbgQK34fFL9K+E=\");\n_c = PlaylistBuilder;\nvar _c;\n$RefreshReg$(_c, \"PlaylistBuilder\");","map":{"version":3,"names":["useEffect","useState","api","socket","jsxDEV","_jsxDEV","PlaylistBuilder","playlistId","_s","items","setItems","dragIndex","setDragIndex","load","res","get","data","emit","on","id","off","moveItem","target","updated","moved","splice","post","map","i","idx","_id","position","children","index","_i$mediaId","draggable","onDragStart","onDragOver","e","preventDefault","onDrop","className","mediaId","filename","duration","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/PlaylistBuilder.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../../api/services\";\nimport { socket } from \"../../socket/socket\";\n\nexport default function PlaylistBuilder({ playlistId }) {\n  const [items, setItems] = useState([]);\n  const [dragIndex, setDragIndex] = useState(null);\n\n  async function load() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n\n  useEffect(() => {\n    if (!playlistId) return;\n    socket.emit(\"register-playlist\", playlistId);\n    load();\n\n    socket.on(\"playlist-updated\", ({ playlistId: id }) => {\n      if (id === playlistId) load();\n    });\n\n    return () => socket.off(\"playlist-updated\");\n  }, [playlistId]);\n\n  function moveItem(target) {\n    const updated = [...items];\n    const [moved] = updated.splice(dragIndex, 1);\n    updated.splice(target, 0, moved);\n    setItems(updated);\n\n    api.post(\"/playlists/reorder\", {\n      playlistId,\n      items: updated.map((i, idx) => ({\n        id: i._id,\n        position: idx\n      }))\n    });\n  }\n\n  return (\n    <div>\n      {items.map((i, index) => (\n        <div\n          key={i._id}\n          draggable\n          onDragStart={() => setDragIndex(index)}\n          onDragOver={e => e.preventDefault()}\n          onDrop={() => moveItem(index)}\n          className=\"border p-2 mb-1 cursor-move\"\n        >\n          {i.mediaId?.filename} â€” {i.duration}s\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,MAAM,QAAQ,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,eAAe,SAASC,eAAeA,CAAC;EAAEC;AAAW,CAAC,EAAE;EAAAC,EAAA;EACtD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAEhD,eAAeY,IAAIA,CAAA,EAAG;IACpB,MAAMC,GAAG,GAAG,MAAMZ,GAAG,CAACa,GAAG,CAAC,cAAcR,UAAU,QAAQ,CAAC;IAC3DG,QAAQ,CAACI,GAAG,CAACE,IAAI,CAAC;EACpB;EAEAhB,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,UAAU,EAAE;IACjBJ,MAAM,CAACc,IAAI,CAAC,mBAAmB,EAAEV,UAAU,CAAC;IAC5CM,IAAI,CAAC,CAAC;IAENV,MAAM,CAACe,EAAE,CAAC,kBAAkB,EAAE,CAAC;MAAEX,UAAU,EAAEY;IAAG,CAAC,KAAK;MACpD,IAAIA,EAAE,KAAKZ,UAAU,EAAEM,IAAI,CAAC,CAAC;IAC/B,CAAC,CAAC;IAEF,OAAO,MAAMV,MAAM,CAACiB,GAAG,CAAC,kBAAkB,CAAC;EAC7C,CAAC,EAAE,CAACb,UAAU,CAAC,CAAC;EAEhB,SAASc,QAAQA,CAACC,MAAM,EAAE;IACxB,MAAMC,OAAO,GAAG,CAAC,GAAGd,KAAK,CAAC;IAC1B,MAAM,CAACe,KAAK,CAAC,GAAGD,OAAO,CAACE,MAAM,CAACd,SAAS,EAAE,CAAC,CAAC;IAC5CY,OAAO,CAACE,MAAM,CAACH,MAAM,EAAE,CAAC,EAAEE,KAAK,CAAC;IAChCd,QAAQ,CAACa,OAAO,CAAC;IAEjBrB,GAAG,CAACwB,IAAI,CAAC,oBAAoB,EAAE;MAC7BnB,UAAU;MACVE,KAAK,EAAEc,OAAO,CAACI,GAAG,CAAC,CAACC,CAAC,EAAEC,GAAG,MAAM;QAC9BV,EAAE,EAAES,CAAC,CAACE,GAAG;QACTC,QAAQ,EAAEF;MACZ,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,oBACExB,OAAA;IAAA2B,QAAA,EACGvB,KAAK,CAACkB,GAAG,CAAC,CAACC,CAAC,EAAEK,KAAK;MAAA,IAAAC,UAAA;MAAA,oBAClB7B,OAAA;QAEE8B,SAAS;QACTC,WAAW,EAAEA,CAAA,KAAMxB,YAAY,CAACqB,KAAK,CAAE;QACvCI,UAAU,EAAEC,CAAC,IAAIA,CAAC,CAACC,cAAc,CAAC,CAAE;QACpCC,MAAM,EAAEA,CAAA,KAAMnB,QAAQ,CAACY,KAAK,CAAE;QAC9BQ,SAAS,EAAC,6BAA6B;QAAAT,QAAA,IAAAE,UAAA,GAEtCN,CAAC,CAACc,OAAO,cAAAR,UAAA,uBAATA,UAAA,CAAWS,QAAQ,EAAC,UAAG,EAACf,CAAC,CAACgB,QAAQ,EAAC,GACtC;MAAA,GAROhB,CAAC,CAACE,GAAG;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAQP,CAAC;IAAA,CACP;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAACxC,EAAA,CApDuBF,eAAe;AAAA2C,EAAA,GAAf3C,eAAe;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\screens\\\\Zone.jsx\";\nimport { Rnd } from \"react-rnd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GRID = 20;\nconst snap = value => Math.round(value / GRID) * GRID;\nconst clamp01 = v => Math.max(0, Math.min(1, v));\nfunction Zone({\n  zone,\n  containerRef,\n  onChange,\n  media = [],\n  updateZone,\n  mode\n}) {\n  if (!(containerRef !== null && containerRef !== void 0 && containerRef.current)) return null;\n  const {\n    offsetWidth,\n    offsetHeight\n  } = containerRef.current;\n  const isLive = mode === \"live\";\n  function handleMove(pos) {\n    onChange({\n      ...zone,\n      x: clamp01(snap(pos.x) / offsetWidth),\n      y: clamp01(snap(pos.y) / offsetHeight)\n    });\n  }\n  function handleResize(ref, pos) {\n    onChange({\n      ...zone,\n      w: clamp01(snap(ref.offsetWidth) / offsetWidth),\n      h: clamp01(snap(ref.offsetHeight) / offsetHeight),\n      x: clamp01(snap(pos.x) / offsetWidth),\n      y: clamp01(snap(pos.y) / offsetHeight)\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(Rnd, {\n    disableDragging: isLive || zone.locked,\n    enableResizing: !isLive && !zone.locked,\n    size: {\n      width: zone.w * offsetWidth,\n      height: zone.h * offsetHeight\n    },\n    position: {\n      x: zone.x * offsetWidth,\n      y: zone.y * offsetHeight\n    },\n    bounds: \"parent\",\n    onDragStop: (e, d) => handleMove(d),\n    onResizeStop: (e, dir, ref, delta, pos) => handleResize(ref, pos),\n    style: {\n      zIndex: zone.zIndex\n    },\n    className: \"border-2 border-indigo-500 bg-indigo-100/30\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-xs p-1 font-semibold\",\n      children: zone.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"flex items-center gap-1 text-xs mt-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: !!zone.locked,\n        disabled: isLive,\n        onChange: e => updateZone(zone.id, {\n          locked: e.target.checked\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), \"\\uD83D\\uDD12 Lock\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"w-full text-xs bg-black text-white mt-1\",\n      value: zone.fallbackMediaId || \"\",\n      disabled: isLive,\n      onChange: e => updateZone(zone.id, {\n        fallbackMediaId: e.target.value || null\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"No fallback\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), media.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: m._id,\n        children: m.filename || m.title\n      }, m._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_c = Zone;\nexport default Zone;\nvar _c;\n$RefreshReg$(_c, \"Zone\");","map":{"version":3,"names":["Rnd","jsxDEV","_jsxDEV","GRID","snap","value","Math","round","clamp01","v","max","min","Zone","zone","containerRef","onChange","media","updateZone","mode","current","offsetWidth","offsetHeight","isLive","handleMove","pos","x","y","handleResize","ref","w","h","disableDragging","locked","enableResizing","size","width","height","position","bounds","onDragStop","e","d","onResizeStop","dir","delta","style","zIndex","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","disabled","id","target","fallbackMediaId","map","m","_id","filename","title","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/screens/Zone.jsx"],"sourcesContent":["import { Rnd } from \"react-rnd\";\n\nconst GRID = 20;\nconst snap = value => Math.round(value / GRID) * GRID;\nconst clamp01 = v => Math.max(0, Math.min(1, v));\n\nfunction Zone({\n  zone,\n  containerRef,\n  onChange,\n  media = [],\n  updateZone,\n  mode\n}) {\n  if (!containerRef?.current) return null;\n\n  const { offsetWidth, offsetHeight } = containerRef.current;\n  const isLive = mode === \"live\";\n\n  function handleMove(pos) {\n    onChange({\n      ...zone,\n      x: clamp01(snap(pos.x) / offsetWidth),\n      y: clamp01(snap(pos.y) / offsetHeight)\n    });\n  }\n\n  function handleResize(ref, pos) {\n    onChange({\n      ...zone,\n      w: clamp01(snap(ref.offsetWidth) / offsetWidth),\n      h: clamp01(snap(ref.offsetHeight) / offsetHeight),\n      x: clamp01(snap(pos.x) / offsetWidth),\n      y: clamp01(snap(pos.y) / offsetHeight)\n    });\n  }\n\n  return (\n    <Rnd\n      disableDragging={isLive || zone.locked}\n      enableResizing={!isLive && !zone.locked}\n      size={{\n        width: zone.w * offsetWidth,\n        height: zone.h * offsetHeight\n      }}\n      position={{\n        x: zone.x * offsetWidth,\n        y: zone.y * offsetHeight\n      }}\n      bounds=\"parent\"\n      onDragStop={(e, d) => handleMove(d)}\n      onResizeStop={(e, dir, ref, delta, pos) =>\n        handleResize(ref, pos)\n      }\n      style={{ zIndex: zone.zIndex }}\n      className=\"border-2 border-indigo-500 bg-indigo-100/30\"\n    >\n      {/* Zone title */}\n      <div className=\"text-xs p-1 font-semibold\">\n        {zone.name}\n      </div>\n\n      {/* Lock toggle */}\n      <label className=\"flex items-center gap-1 text-xs mt-1\">\n        <input\n          type=\"checkbox\"\n          checked={!!zone.locked}\n          disabled={isLive}\n          onChange={e =>\n            updateZone(zone.id, {\n              locked: e.target.checked\n            })\n          }\n        />\n        ðŸ”’ Lock\n      </label>\n\n      {/* Fallback selector */}\n      <select\n        className=\"w-full text-xs bg-black text-white mt-1\"\n        value={zone.fallbackMediaId || \"\"}\n        disabled={isLive}\n        onChange={e =>\n          updateZone(zone.id, {\n            fallbackMediaId: e.target.value || null\n          })\n        }\n      >\n        <option value=\"\">No fallback</option>\n        {media.map(m => (\n          <option key={m._id} value={m._id}>\n            {m.filename || m.title}\n          </option>\n        ))}\n      </select>\n    </Rnd>\n  );\n}\n\nexport default Zone;\n"],"mappings":";AAAA,SAASA,GAAG,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,IAAI,GAAG,EAAE;AACf,MAAMC,IAAI,GAAGC,KAAK,IAAIC,IAAI,CAACC,KAAK,CAACF,KAAK,GAAGF,IAAI,CAAC,GAAGA,IAAI;AACrD,MAAMK,OAAO,GAAGC,CAAC,IAAIH,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEJ,IAAI,CAACK,GAAG,CAAC,CAAC,EAAEF,CAAC,CAAC,CAAC;AAEhD,SAASG,IAAIA,CAAC;EACZC,IAAI;EACJC,YAAY;EACZC,QAAQ;EACRC,KAAK,GAAG,EAAE;EACVC,UAAU;EACVC;AACF,CAAC,EAAE;EACD,IAAI,EAACJ,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAEK,OAAO,GAAE,OAAO,IAAI;EAEvC,MAAM;IAAEC,WAAW;IAAEC;EAAa,CAAC,GAAGP,YAAY,CAACK,OAAO;EAC1D,MAAMG,MAAM,GAAGJ,IAAI,KAAK,MAAM;EAE9B,SAASK,UAAUA,CAACC,GAAG,EAAE;IACvBT,QAAQ,CAAC;MACP,GAAGF,IAAI;MACPY,CAAC,EAAEjB,OAAO,CAACJ,IAAI,CAACoB,GAAG,CAACC,CAAC,CAAC,GAAGL,WAAW,CAAC;MACrCM,CAAC,EAAElB,OAAO,CAACJ,IAAI,CAACoB,GAAG,CAACE,CAAC,CAAC,GAAGL,YAAY;IACvC,CAAC,CAAC;EACJ;EAEA,SAASM,YAAYA,CAACC,GAAG,EAAEJ,GAAG,EAAE;IAC9BT,QAAQ,CAAC;MACP,GAAGF,IAAI;MACPgB,CAAC,EAAErB,OAAO,CAACJ,IAAI,CAACwB,GAAG,CAACR,WAAW,CAAC,GAAGA,WAAW,CAAC;MAC/CU,CAAC,EAAEtB,OAAO,CAACJ,IAAI,CAACwB,GAAG,CAACP,YAAY,CAAC,GAAGA,YAAY,CAAC;MACjDI,CAAC,EAAEjB,OAAO,CAACJ,IAAI,CAACoB,GAAG,CAACC,CAAC,CAAC,GAAGL,WAAW,CAAC;MACrCM,CAAC,EAAElB,OAAO,CAACJ,IAAI,CAACoB,GAAG,CAACE,CAAC,CAAC,GAAGL,YAAY;IACvC,CAAC,CAAC;EACJ;EAEA,oBACEnB,OAAA,CAACF,GAAG;IACF+B,eAAe,EAAET,MAAM,IAAIT,IAAI,CAACmB,MAAO;IACvCC,cAAc,EAAE,CAACX,MAAM,IAAI,CAACT,IAAI,CAACmB,MAAO;IACxCE,IAAI,EAAE;MACJC,KAAK,EAAEtB,IAAI,CAACgB,CAAC,GAAGT,WAAW;MAC3BgB,MAAM,EAAEvB,IAAI,CAACiB,CAAC,GAAGT;IACnB,CAAE;IACFgB,QAAQ,EAAE;MACRZ,CAAC,EAAEZ,IAAI,CAACY,CAAC,GAAGL,WAAW;MACvBM,CAAC,EAAEb,IAAI,CAACa,CAAC,GAAGL;IACd,CAAE;IACFiB,MAAM,EAAC,QAAQ;IACfC,UAAU,EAAEA,CAACC,CAAC,EAAEC,CAAC,KAAKlB,UAAU,CAACkB,CAAC,CAAE;IACpCC,YAAY,EAAEA,CAACF,CAAC,EAAEG,GAAG,EAAEf,GAAG,EAAEgB,KAAK,EAAEpB,GAAG,KACpCG,YAAY,CAACC,GAAG,EAAEJ,GAAG,CACtB;IACDqB,KAAK,EAAE;MAAEC,MAAM,EAAEjC,IAAI,CAACiC;IAAO,CAAE;IAC/BC,SAAS,EAAC,6CAA6C;IAAAC,QAAA,gBAGvD9C,OAAA;MAAK6C,SAAS,EAAC,2BAA2B;MAAAC,QAAA,EACvCnC,IAAI,CAACoC;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eAGNnD,OAAA;MAAO6C,SAAS,EAAC,sCAAsC;MAAAC,QAAA,gBACrD9C,OAAA;QACEoD,IAAI,EAAC,UAAU;QACfC,OAAO,EAAE,CAAC,CAAC1C,IAAI,CAACmB,MAAO;QACvBwB,QAAQ,EAAElC,MAAO;QACjBP,QAAQ,EAAEyB,CAAC,IACTvB,UAAU,CAACJ,IAAI,CAAC4C,EAAE,EAAE;UAClBzB,MAAM,EAAEQ,CAAC,CAACkB,MAAM,CAACH;QACnB,CAAC;MACF;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,qBAEJ;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAGRnD,OAAA;MACE6C,SAAS,EAAC,yCAAyC;MACnD1C,KAAK,EAAEQ,IAAI,CAAC8C,eAAe,IAAI,EAAG;MAClCH,QAAQ,EAAElC,MAAO;MACjBP,QAAQ,EAAEyB,CAAC,IACTvB,UAAU,CAACJ,IAAI,CAAC4C,EAAE,EAAE;QAClBE,eAAe,EAAEnB,CAAC,CAACkB,MAAM,CAACrD,KAAK,IAAI;MACrC,CAAC,CACF;MAAA2C,QAAA,gBAED9C,OAAA;QAAQG,KAAK,EAAC,EAAE;QAAA2C,QAAA,EAAC;MAAW;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EACpCrC,KAAK,CAAC4C,GAAG,CAACC,CAAC,iBACV3D,OAAA;QAAoBG,KAAK,EAAEwD,CAAC,CAACC,GAAI;QAAAd,QAAA,EAC9Ba,CAAC,CAACE,QAAQ,IAAIF,CAAC,CAACG;MAAK,GADXH,CAAC,CAACC,GAAG;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEV,CACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACY,EAAA,GA3FQrD,IAAI;AA6Fb,eAAeA,IAAI;AAAC,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
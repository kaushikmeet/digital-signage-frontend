{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\screens\\\\ApplyGroupLayoutButton.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport api from \"../../api/services\";\nimport { v4 as uuid } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ApplyGroupLayoutButton({\n  screenId,\n  layout = [],\n  onApply\n}) {\n  _s();\n  const [loading, setLoading] = useState(false);\n  async function applyLayout() {\n    if (!screenId || !layout.length) return;\n    try {\n      setLoading(true);\n      const preparedZones = layout.map(z => {\n        var _z$playlistId, _z$fallbackMediaId, _z$timeline, _z$widget, _z$locked;\n        return {\n          _id: uuid(),\n          // new zone instance per screen\n          name: z.name,\n          x: z.x,\n          y: z.y,\n          w: z.w,\n          h: z.h,\n          zIndex: z.zIndex || 1,\n          // ✅ PRESERVE GROUP CONFIG\n          playlistId: (_z$playlistId = z.playlistId) !== null && _z$playlistId !== void 0 ? _z$playlistId : null,\n          fallbackMediaId: (_z$fallbackMediaId = z.fallbackMediaId) !== null && _z$fallbackMediaId !== void 0 ? _z$fallbackMediaId : null,\n          timeline: (_z$timeline = z.timeline) !== null && _z$timeline !== void 0 ? _z$timeline : [],\n          widget: (_z$widget = z.widget) !== null && _z$widget !== void 0 ? _z$widget : null,\n          locked: (_z$locked = z.locked) !== null && _z$locked !== void 0 ? _z$locked : false\n        };\n      });\n      await api.put(`/screens/${screenId}/zones`, {\n        zones: preparedZones\n      });\n\n      // update local UI\n      onApply === null || onApply === void 0 ? void 0 : onApply(preparedZones);\n    } catch (err) {\n      console.error(err);\n      alert(\"❌ Failed to apply group layout\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    disabled: loading,\n    onClick: applyLayout,\n    className: `w-full mt-2 px-3 py-1 rounded\n        ${loading ? \"bg-gray-600\" : \"bg-indigo-700 hover:bg-indigo-600\"}\n      `,\n    children: loading ? \"Applying...\" : \"Apply Group Layout\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(ApplyGroupLayoutButton, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n_c = ApplyGroupLayoutButton;\nvar _c;\n$RefreshReg$(_c, \"ApplyGroupLayoutButton\");","map":{"version":3,"names":["useState","api","v4","uuid","jsxDEV","_jsxDEV","ApplyGroupLayoutButton","screenId","layout","onApply","_s","loading","setLoading","applyLayout","length","preparedZones","map","z","_z$playlistId","_z$fallbackMediaId","_z$timeline","_z$widget","_z$locked","_id","name","x","y","w","h","zIndex","playlistId","fallbackMediaId","timeline","widget","locked","put","zones","err","console","error","alert","disabled","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/screens/ApplyGroupLayoutButton.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport api from \"../../api/services\";\nimport { v4 as uuid } from \"uuid\";\n\nexport default function ApplyGroupLayoutButton({\n  screenId,\n  layout = [],\n  onApply\n}) {\n  const [loading, setLoading] = useState(false);\n\n  async function applyLayout() {\n    if (!screenId || !layout.length) return;\n\n    try {\n      setLoading(true);\n\n      const preparedZones = layout.map(z => ({\n        _id: uuid(),                // new zone instance per screen\n        name: z.name,\n        x: z.x,\n        y: z.y,\n        w: z.w,\n        h: z.h,\n        zIndex: z.zIndex || 1,\n\n        // ✅ PRESERVE GROUP CONFIG\n        playlistId: z.playlistId ?? null,\n        fallbackMediaId: z.fallbackMediaId ?? null,\n        timeline: z.timeline ?? [],\n        widget: z.widget ?? null,\n        locked: z.locked ?? false\n      }));\n\n      await api.put(`/screens/${screenId}/zones`, {\n        zones: preparedZones\n      });\n\n      // update local UI\n      onApply?.(preparedZones);\n\n    } catch (err) {\n      console.error(err);\n      alert(\"❌ Failed to apply group layout\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <button\n      disabled={loading}\n      onClick={applyLayout}\n      className={`w-full mt-2 px-3 py-1 rounded\n        ${loading ? \"bg-gray-600\" : \"bg-indigo-700 hover:bg-indigo-600\"}\n      `}\n    >\n      {loading ? \"Applying...\" : \"Apply Group Layout\"}\n    </button>\n  );\n}\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,EAAE,IAAIC,IAAI,QAAQ,MAAM;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,eAAe,SAASC,sBAAsBA,CAAC;EAC7CC,QAAQ;EACRC,MAAM,GAAG,EAAE;EACXC;AACF,CAAC,EAAE;EAAAC,EAAA;EACD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAE7C,eAAea,WAAWA,CAAA,EAAG;IAC3B,IAAI,CAACN,QAAQ,IAAI,CAACC,MAAM,CAACM,MAAM,EAAE;IAEjC,IAAI;MACFF,UAAU,CAAC,IAAI,CAAC;MAEhB,MAAMG,aAAa,GAAGP,MAAM,CAACQ,GAAG,CAACC,CAAC;QAAA,IAAAC,aAAA,EAAAC,kBAAA,EAAAC,WAAA,EAAAC,SAAA,EAAAC,SAAA;QAAA,OAAK;UACrCC,GAAG,EAAEpB,IAAI,CAAC,CAAC;UAAiB;UAC5BqB,IAAI,EAAEP,CAAC,CAACO,IAAI;UACZC,CAAC,EAAER,CAAC,CAACQ,CAAC;UACNC,CAAC,EAAET,CAAC,CAACS,CAAC;UACNC,CAAC,EAAEV,CAAC,CAACU,CAAC;UACNC,CAAC,EAAEX,CAAC,CAACW,CAAC;UACNC,MAAM,EAAEZ,CAAC,CAACY,MAAM,IAAI,CAAC;UAErB;UACAC,UAAU,GAAAZ,aAAA,GAAED,CAAC,CAACa,UAAU,cAAAZ,aAAA,cAAAA,aAAA,GAAI,IAAI;UAChCa,eAAe,GAAAZ,kBAAA,GAAEF,CAAC,CAACc,eAAe,cAAAZ,kBAAA,cAAAA,kBAAA,GAAI,IAAI;UAC1Ca,QAAQ,GAAAZ,WAAA,GAAEH,CAAC,CAACe,QAAQ,cAAAZ,WAAA,cAAAA,WAAA,GAAI,EAAE;UAC1Ba,MAAM,GAAAZ,SAAA,GAAEJ,CAAC,CAACgB,MAAM,cAAAZ,SAAA,cAAAA,SAAA,GAAI,IAAI;UACxBa,MAAM,GAAAZ,SAAA,GAAEL,CAAC,CAACiB,MAAM,cAAAZ,SAAA,cAAAA,SAAA,GAAI;QACtB,CAAC;MAAA,CAAC,CAAC;MAEH,MAAMrB,GAAG,CAACkC,GAAG,CAAC,YAAY5B,QAAQ,QAAQ,EAAE;QAC1C6B,KAAK,EAAErB;MACT,CAAC,CAAC;;MAEF;MACAN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAGM,aAAa,CAAC;IAE1B,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBG,KAAK,CAAC,gCAAgC,CAAC;IACzC,CAAC,SAAS;MACR5B,UAAU,CAAC,KAAK,CAAC;IACnB;EACF;EAEA,oBACEP,OAAA;IACEoC,QAAQ,EAAE9B,OAAQ;IAClB+B,OAAO,EAAE7B,WAAY;IACrB8B,SAAS,EAAE;AACjB,UAAUhC,OAAO,GAAG,aAAa,GAAG,mCAAmC;AACvE,OAAQ;IAAAiC,QAAA,EAEDjC,OAAO,GAAG,aAAa,GAAG;EAAoB;IAAAkC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACzC,CAAC;AAEb;AAACtC,EAAA,CAxDuBJ,sBAAsB;AAAA2C,EAAA,GAAtB3C,sBAAsB;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\screens\\\\ZoneEditor.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../../api/services\";\nimport { debounce } from \"../../utils/useDebounce\";\nimport Zone from \"../../components/screens/Zone\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ZoneEditor({\n  zones = [],\n  setZones,\n  containerRef,\n  screenId,\n  mode\n}) {\n  _s();\n  const [media, setMedia] = useState([]);\n\n  /* ---------- LOAD MEDIA ---------- */\n  useEffect(() => {\n    api.get(\"/media\").then(res => {\n      setMedia(Array.isArray(res.data) ? res.data : []);\n    });\n  }, []);\n\n  /* ---------- UPDATE ZONE ---------- */\n  function updateZone(id, changes) {\n    setZones(prev => prev.map(z => z._id === id || z.tempId === id ? {\n      ...z,\n      ...changes\n    } : z));\n  }\n\n  /* ---------- SAVE ZONES (DEBOUNCED) ---------- */\n  const saveZones = debounce(zonesToSave => {\n    if (!screenId) return;\n    const cleaned = zonesToSave.map(({\n      tempId,\n      ...z\n    }) => z);\n    api.put(`/screens/${screenId}/zones`, {\n      zones: cleaned\n    });\n  }, 800);\n  useEffect(() => {\n    if (zones.length) saveZones(zones);\n  }, [zones]);\n\n  /* ---------- RENDER ---------- */\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: zones.map(zone => {\n      const key = zone._id || zone.tempId;\n      if (!key) return null;\n      return /*#__PURE__*/_jsxDEV(Zone, {\n        zone: zone,\n        mode: mode,\n        containerRef: containerRef,\n        media: media,\n        updateZone: updateZone,\n        onChange: updated => updateZone(updated._id || updated.tempId, updated)\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false);\n}\n_s(ZoneEditor, \"Gng1ieIzUDFjmjt+9/Vr9QTc2hU=\");\n_c = ZoneEditor;\nexport default ZoneEditor;\nvar _c;\n$RefreshReg$(_c, \"ZoneEditor\");","map":{"version":3,"names":["useEffect","useState","api","debounce","Zone","jsxDEV","_jsxDEV","Fragment","_Fragment","ZoneEditor","zones","setZones","containerRef","screenId","mode","_s","media","setMedia","get","then","res","Array","isArray","data","updateZone","id","changes","prev","map","z","_id","tempId","saveZones","zonesToSave","cleaned","put","length","children","zone","key","onChange","updated","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/screens/ZoneEditor.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../../api/services\";\nimport { debounce } from \"../../utils/useDebounce\";\nimport Zone from \"../../components/screens/Zone\";\n\nfunction ZoneEditor({ zones = [], setZones, containerRef, screenId, mode }) {\n  const [media, setMedia] = useState([]);\n\n  /* ---------- LOAD MEDIA ---------- */\n  useEffect(() => {\n    api.get(\"/media\").then(res => {\n      setMedia(Array.isArray(res.data) ? res.data : []);\n    });\n  }, []);\n\n  /* ---------- UPDATE ZONE ---------- */\n  function updateZone(id, changes) {\n    setZones(prev =>\n      prev.map(z =>\n        (z._id === id || z.tempId === id)\n          ? { ...z, ...changes }\n          : z\n      )\n    );\n  }\n\n  /* ---------- SAVE ZONES (DEBOUNCED) ---------- */\n  const saveZones = debounce(zonesToSave => {\n    if (!screenId) return;\n    \n    const cleaned = zonesToSave.map(({ tempId, ...z }) => z);\n\n    api.put(`/screens/${screenId}/zones`, {\n      zones: cleaned\n    });\n  }, 800);\n\n  useEffect(() => {\n    if (zones.length) saveZones(zones);\n  }, [zones]);\n\n  /* ---------- RENDER ---------- */\n  return (\n    <>\n      {zones.map(zone => {\n        const key = zone._id || zone.tempId;\n        if (!key) return null;\n\n        return (\n          <Zone\n            key={key}\n            zone={zone}\n            mode={mode}\n            containerRef={containerRef}\n            media={media}\n            updateZone={updateZone}\n            onChange={updated =>\n              updateZone(updated._id || updated.tempId, updated)\n            }\n          />\n        );\n      })}\n    </>\n  );\n}\n\nexport default ZoneEditor;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,QAAQ,QAAQ,yBAAyB;AAClD,OAAOC,IAAI,MAAM,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEjD,SAASC,UAAUA,CAAC;EAAEC,KAAK,GAAG,EAAE;EAAEC,QAAQ;EAAEC,YAAY;EAAEC,QAAQ;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EAC1E,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;;EAEtC;EACAD,SAAS,CAAC,MAAM;IACdE,GAAG,CAACgB,GAAG,CAAC,QAAQ,CAAC,CAACC,IAAI,CAACC,GAAG,IAAI;MAC5BH,QAAQ,CAACI,KAAK,CAACC,OAAO,CAACF,GAAG,CAACG,IAAI,CAAC,GAAGH,GAAG,CAACG,IAAI,GAAG,EAAE,CAAC;IACnD,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,SAASC,UAAUA,CAACC,EAAE,EAAEC,OAAO,EAAE;IAC/Bf,QAAQ,CAACgB,IAAI,IACXA,IAAI,CAACC,GAAG,CAACC,CAAC,IACPA,CAAC,CAACC,GAAG,KAAKL,EAAE,IAAII,CAAC,CAACE,MAAM,KAAKN,EAAE,GAC5B;MAAE,GAAGI,CAAC;MAAE,GAAGH;IAAQ,CAAC,GACpBG,CACN,CACF,CAAC;EACH;;EAEA;EACA,MAAMG,SAAS,GAAG7B,QAAQ,CAAC8B,WAAW,IAAI;IACxC,IAAI,CAACpB,QAAQ,EAAE;IAEf,MAAMqB,OAAO,GAAGD,WAAW,CAACL,GAAG,CAAC,CAAC;MAAEG,MAAM;MAAE,GAAGF;IAAE,CAAC,KAAKA,CAAC,CAAC;IAExD3B,GAAG,CAACiC,GAAG,CAAC,YAAYtB,QAAQ,QAAQ,EAAE;MACpCH,KAAK,EAAEwB;IACT,CAAC,CAAC;EACJ,CAAC,EAAE,GAAG,CAAC;EAEPlC,SAAS,CAAC,MAAM;IACd,IAAIU,KAAK,CAAC0B,MAAM,EAAEJ,SAAS,CAACtB,KAAK,CAAC;EACpC,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;;EAEX;EACA,oBACEJ,OAAA,CAAAE,SAAA;IAAA6B,QAAA,EACG3B,KAAK,CAACkB,GAAG,CAACU,IAAI,IAAI;MACjB,MAAMC,GAAG,GAAGD,IAAI,CAACR,GAAG,IAAIQ,IAAI,CAACP,MAAM;MACnC,IAAI,CAACQ,GAAG,EAAE,OAAO,IAAI;MAErB,oBACEjC,OAAA,CAACF,IAAI;QAEHkC,IAAI,EAAEA,IAAK;QACXxB,IAAI,EAAEA,IAAK;QACXF,YAAY,EAAEA,YAAa;QAC3BI,KAAK,EAAEA,KAAM;QACbQ,UAAU,EAAEA,UAAW;QACvBgB,QAAQ,EAAEC,OAAO,IACfjB,UAAU,CAACiB,OAAO,CAACX,GAAG,IAAIW,OAAO,CAACV,MAAM,EAAEU,OAAO;MAClD,GARIF,GAAG;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAST,CAAC;IAEN,CAAC;EAAC,gBACF,CAAC;AAEP;AAAC9B,EAAA,CA3DQN,UAAU;AAAAqC,EAAA,GAAVrC,UAAU;AA6DnB,eAAeA,UAAU;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
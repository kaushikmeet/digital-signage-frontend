{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\ZonePlayer.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport usePlaylistPlayer from \"../hooks/usePlaylistPlayer\";\nimport MediaPlayer from \"./MediaPlayer\";\nimport ZoneContentResolver from \"./ZoneContentResolver\";\nimport LiveWidgetRenderer from \"./LiveWidgetRenderer\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ZonePlayer({\n  screenId,\n  zone,\n  activeTimelinePlaylist\n}) {\n  _s();\n  var _ref;\n  const [playlistItems, setPlaylistItems] = useState([]);\n  const [fallback, setFallback] = useState(null);\n  const playlistId = (_ref = activeTimelinePlaylist !== null && activeTimelinePlaylist !== void 0 ? activeTimelinePlaylist : zone === null || zone === void 0 ? void 0 : zone.playlistId) !== null && _ref !== void 0 ? _ref : null;\n  useEffect(() => {\n    if (!playlistId) return;\n    api.get(`/playlists/${playlistId}/active-items`).then(res => setPlaylistItems(res.data || []));\n  }, [playlistId]);\n  useEffect(() => {\n    if (!(zone !== null && zone !== void 0 && zone.fallbackMediaId)) return;\n    api.get(`/media/${zone.fallbackMediaId}`).then(res => setFallback(res.data));\n  }, [zone === null || zone === void 0 ? void 0 : zone.fallbackMediaId]);\n  const itemsToPlay = playlistItems.length ? playlistItems : fallback ? [{\n    mediaId: fallback\n  }] : [];\n  const {\n    current\n  } = usePlaylistPlayer(itemsToPlay);\n  if (!(current !== null && current !== void 0 && current.mediaId) && !(zone !== null && zone !== void 0 && zone.widget)) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [(zone === null || zone === void 0 ? void 0 : zone.widget) && /*#__PURE__*/_jsxDEV(LiveWidgetRenderer, {\n      widget: zone.widget\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this), (current === null || current === void 0 ? void 0 : current.mediaId) && /*#__PURE__*/_jsxDEV(MediaPlayer, {\n      media: current.mediaId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(ZonePlayer, \"5hPs2On9oEvbXQVCSUj7MQi5d0s=\", false, function () {\n  return [usePlaylistPlayer];\n});\n_c = ZonePlayer;\nvar _c;\n$RefreshReg$(_c, \"ZonePlayer\");","map":{"version":3,"names":["useEffect","useState","api","usePlaylistPlayer","MediaPlayer","ZoneContentResolver","LiveWidgetRenderer","jsxDEV","_jsxDEV","Fragment","_Fragment","ZonePlayer","screenId","zone","activeTimelinePlaylist","_s","_ref","playlistItems","setPlaylistItems","fallback","setFallback","playlistId","get","then","res","data","fallbackMediaId","itemsToPlay","length","mediaId","current","widget","children","fileName","_jsxFileName","lineNumber","columnNumber","media","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/ZonePlayer.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport usePlaylistPlayer from \"../hooks/usePlaylistPlayer\";\nimport MediaPlayer from \"./MediaPlayer\";\nimport ZoneContentResolver from \"./ZoneContentResolver\";\nimport LiveWidgetRenderer from \"./LiveWidgetRenderer\";\n\nexport default function ZonePlayer({\n  screenId,\n  zone,\n  activeTimelinePlaylist\n}) {\n  const [playlistItems, setPlaylistItems] = useState([]);\n  const [fallback, setFallback] = useState(null);\n\n  const playlistId =\n    activeTimelinePlaylist ??\n    zone?.playlistId ??\n    null;\n\n  useEffect(() => {\n    if (!playlistId) return;\n    api\n      .get(`/playlists/${playlistId}/active-items`)\n      .then(res => setPlaylistItems(res.data || []));\n  }, [playlistId]);\n\n  useEffect(() => {\n    if (!zone?.fallbackMediaId) return;\n    api\n      .get(`/media/${zone.fallbackMediaId}`)\n      .then(res => setFallback(res.data));\n  }, [zone?.fallbackMediaId]);\n\n  const itemsToPlay =\n    playlistItems.length\n      ? playlistItems\n      : fallback\n      ? [{ mediaId: fallback }]\n      : [];\n\n  const { current } = usePlaylistPlayer(itemsToPlay);\n\n  if (!current?.mediaId && !zone?.widget) return null;\n\n  return (\n    <>\n      {zone?.widget && (\n        <LiveWidgetRenderer widget={zone.widget} />\n      )}\n\n      {current?.mediaId && (\n        <MediaPlayer media={current.mediaId} />\n      )}\n    </>\n  );\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,iBAAiB,MAAM,4BAA4B;AAC1D,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,mBAAmB,MAAM,uBAAuB;AACvD,OAAOC,kBAAkB,MAAM,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtD,eAAe,SAASC,UAAUA,CAAC;EACjCC,QAAQ;EACRC,IAAI;EACJC;AACF,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,IAAA;EACD,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAE9C,MAAMoB,UAAU,IAAAL,IAAA,GACdF,sBAAsB,aAAtBA,sBAAsB,cAAtBA,sBAAsB,GACtBD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,UAAU,cAAAL,IAAA,cAAAA,IAAA,GAChB,IAAI;EAENhB,SAAS,CAAC,MAAM;IACd,IAAI,CAACqB,UAAU,EAAE;IACjBnB,GAAG,CACAoB,GAAG,CAAC,cAAcD,UAAU,eAAe,CAAC,CAC5CE,IAAI,CAACC,GAAG,IAAIN,gBAAgB,CAACM,GAAG,CAACC,IAAI,IAAI,EAAE,CAAC,CAAC;EAClD,CAAC,EAAE,CAACJ,UAAU,CAAC,CAAC;EAEhBrB,SAAS,CAAC,MAAM;IACd,IAAI,EAACa,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEa,eAAe,GAAE;IAC5BxB,GAAG,CACAoB,GAAG,CAAC,UAAUT,IAAI,CAACa,eAAe,EAAE,CAAC,CACrCH,IAAI,CAACC,GAAG,IAAIJ,WAAW,CAACI,GAAG,CAACC,IAAI,CAAC,CAAC;EACvC,CAAC,EAAE,CAACZ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEa,eAAe,CAAC,CAAC;EAE3B,MAAMC,WAAW,GACfV,aAAa,CAACW,MAAM,GAChBX,aAAa,GACbE,QAAQ,GACR,CAAC;IAAEU,OAAO,EAAEV;EAAS,CAAC,CAAC,GACvB,EAAE;EAER,MAAM;IAAEW;EAAQ,CAAC,GAAG3B,iBAAiB,CAACwB,WAAW,CAAC;EAElD,IAAI,EAACG,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAED,OAAO,KAAI,EAAChB,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEkB,MAAM,GAAE,OAAO,IAAI;EAEnD,oBACEvB,OAAA,CAAAE,SAAA;IAAAsB,QAAA,GACG,CAAAnB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEkB,MAAM,kBACXvB,OAAA,CAACF,kBAAkB;MAACyB,MAAM,EAAElB,IAAI,CAACkB;IAAO;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAC3C,EAEA,CAAAN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAED,OAAO,kBACfrB,OAAA,CAACJ,WAAW;MAACiC,KAAK,EAAEP,OAAO,CAACD;IAAQ;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CACvC;EAAA,eACD,CAAC;AAEP;AAACrB,EAAA,CAjDuBJ,UAAU;EAAA,QAkCZR,iBAAiB;AAAA;AAAAmC,EAAA,GAlCf3B,UAAU;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
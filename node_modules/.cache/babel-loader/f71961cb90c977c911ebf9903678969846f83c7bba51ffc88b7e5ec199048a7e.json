{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\PlaylistBuilder.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PlaylistBuilder({\n  playlistId\n}) {\n  _s();\n  const [media, setMedia] = useState([]);\n  const [items, setItems] = useState([]);\n  const [mediaId, setMediaId] = useState(\"\");\n  const [duration, setDuration] = useState(10);\n  const [file, setFile] = useState(null);\n\n  /* LOAD MEDIA LIBRARY */\n  useEffect(() => {\n    api.get(\"/media\").then(res => setMedia(res.data));\n  }, []);\n\n  /* LOAD PLAYLIST ITEMS */\n  useEffect(() => {\n    if (!playlistId) return;\n    loadItems();\n  }, [playlistId]);\n  async function loadItems() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n\n  /* UPLOAD MEDIA */\n  async function uploadMedia() {\n    if (!file) return alert(\"Select a file\");\n    const form = new FormData();\n    form.append(\"file\", file);\n    await api.post(\"/media/upload\", form);\n    setFile(null);\n    const res = await api.get(\"/media\");\n    setMedia(res.data);\n  }\n\n  /* ADD TO PLAYLIST */\n  async function addToPlaylist() {\n    if (!mediaId) return alert(\"Select media\");\n    await api.post(\"/playlists/items\", {\n      playlistId,\n      mediaId,\n      duration: Number(duration),\n      position: Date.now()\n    });\n    setMediaId(\"\");\n    loadItems();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-3 bg-gray-50 p-3 rounded\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*,video/*\",\n        onChange: e => setFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: uploadMedia,\n        className: \"text-sm text-blue-600\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"border p-2 rounded\",\n        value: mediaId,\n        onChange: e => setMediaId(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select Media\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), media.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: m._id,\n          children: [m.filename, \" (\", m.type, \")\"]\n        }, m._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        className: \"border p-2 w-20\",\n        value: duration,\n        onChange: e => setDuration(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addToPlaylist,\n        className: \"bg-indigo-600 text-white px-3 rounded\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: items.map(i => {\n        var _i$mediaId;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 text-sm\",\n          children: [i.mediaId ? i.mediaId.type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:8080${i.mediaId.url}`,\n            className: \"w-16 h-10 object-cover rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n            src: `http://localhost:8080${i.mediaId.url}`,\n            className: \"w-16 h-10 rounded\",\n            muted: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 text-xs\",\n            children: \"Media missing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: ((_i$mediaId = i.mediaId) === null || _i$mediaId === void 0 ? void 0 : _i$mediaId.filename) || \"Unknown file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: [i.duration, \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, i._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(PlaylistBuilder, \"Bh6E2DA13ySu76t0LfdbcWP5Abc=\");\n_c = PlaylistBuilder;\nvar _c;\n$RefreshReg$(_c, \"PlaylistBuilder\");","map":{"version":3,"names":["useEffect","useState","api","jsxDEV","_jsxDEV","PlaylistBuilder","playlistId","_s","media","setMedia","items","setItems","mediaId","setMediaId","duration","setDuration","file","setFile","get","then","res","data","loadItems","uploadMedia","alert","form","FormData","append","post","addToPlaylist","Number","position","Date","now","className","children","type","accept","onChange","e","target","files","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","map","m","_id","filename","i","_i$mediaId","src","url","muted","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/PlaylistBuilder.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\n\nexport default function PlaylistBuilder({ playlistId }) {\n  const [media, setMedia] = useState([]);\n  const [items, setItems] = useState([]);\n  const [mediaId, setMediaId] = useState(\"\");\n  const [duration, setDuration] = useState(10);\n  const [file, setFile] = useState(null);\n\n  /* LOAD MEDIA LIBRARY */\n  useEffect(() => {\n    api.get(\"/media\").then((res) => setMedia(res.data));\n  }, []);\n\n  /* LOAD PLAYLIST ITEMS */\n  useEffect(() => {\n    if (!playlistId) return;\n    loadItems();\n  }, [playlistId]);\n\n  async function loadItems() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n\n  /* UPLOAD MEDIA */\n  async function uploadMedia() {\n  if (!file) return alert(\"Select a file\");\n\n  const form = new FormData();\n  form.append(\"file\", file);\n\n  await api.post(\"/media/upload\", form);\n\n  setFile(null);\n\n  const res = await api.get(\"/media\");\n  setMedia(res.data);\n}\n\n  /* ADD TO PLAYLIST */\n  async function addToPlaylist() {\n    if (!mediaId) return alert(\"Select media\");\n\n    await api.post(\"/playlists/items\", {\n      playlistId,\n      mediaId,\n      duration: Number(duration),\n      position: Date.now(),\n    });\n\n    setMediaId(\"\");\n    loadItems();\n  }\n\n  return (\n    <div className=\"space-y-3 bg-gray-50 p-3 rounded\">\n      {/* Upload */}\n      <div className=\"flex gap-2\">\n        <input type=\"file\"  accept=\"image/*,video/*\" onChange={(e) => setFile(e.target.files[0])} />\n        <button onClick={uploadMedia} className=\"text-sm text-blue-600\">\n          Upload\n        </button>\n      </div>\n\n      {/* Add media */}\n      <div className=\"flex gap-2\">\n        <select\n          className=\"border p-2 rounded\"\n          value={mediaId}\n          onChange={(e) => setMediaId(e.target.value)}\n        >\n          <option value=\"\">Select Media</option>\n          {media.map((m) => (\n            <option key={m._id} value={m._id}>\n              {m.filename} ({m.type})\n            </option>\n          ))}\n        </select>\n\n        <input\n          type=\"number\"\n          className=\"border p-2 w-20\"\n          value={duration}\n          onChange={(e) => setDuration(e.target.value)}\n        />\n\n        <button\n          onClick={addToPlaylist}\n          className=\"bg-indigo-600 text-white px-3 rounded\"\n        >\n          Add\n        </button>\n      </div>\n\n      {/* PLAYLIST ITEMS */}\n      <div className=\"space-y-2\">\n        {items.map((i) => (\n          <div key={i._id} className=\"flex items-center gap-3 text-sm\">\n            {i.mediaId ? (\n              i.mediaId.type === \"image\" ? (\n                <img\n                  src={`http://localhost:8080${i.mediaId.url}`}\n                  className=\"w-16 h-10 object-cover rounded\"\n                />\n              ) : (\n                <video\n                  src={`http://localhost:8080${i.mediaId.url}`}\n                  className=\"w-16 h-10 rounded\"\n                  muted\n                />\n              )\n            ) : (\n              <span className=\"text-red-500 text-xs\">Media missing</span>\n            )}\n\n            <span>{i.mediaId?.filename || \"Unknown file\"}</span>\n            <span className=\"text-gray-500\">{i.duration}s</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
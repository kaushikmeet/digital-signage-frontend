{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nexport default function usePlaylistPlayer(items = []) {\n  _s();\n  const [index, setIndex] = useState(0);\n  const [remaining, setRemaining] = useState(0);\n  const [paused, setPaused] = useState(false);\n  const timerRef = useRef(null);\n\n  /* RESET WHEN PLAYLIST CHANGES */\n  useEffect(() => {\n    var _items$;\n    if (!items.length) return;\n    setIndex(0);\n    setRemaining(((_items$ = items[0]) === null || _items$ === void 0 ? void 0 : _items$.duration) || 0);\n    setPaused(false);\n  }, [items]);\n\n  /* PLAYBACK TIMER */\n  useEffect(() => {\n    if (paused || !items.length) return;\n    timerRef.current = setInterval(() => {\n      setRemaining(prev => {\n        if (prev <= 1) {\n          setIndex(i => {\n            var _items$next;\n            const next = (i + 1) % items.length;\n            setRemaining(((_items$next = items[next]) === null || _items$next === void 0 ? void 0 : _items$next.duration) || 0);\n            return next;\n          });\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timerRef.current);\n  }, [paused, items]);\n\n  /* MANUAL SKIP */\n  const skip = () => {\n    if (!items.length) return;\n    setIndex(i => {\n      var _items$next2;\n      const next = (i + 1) % items.length;\n      setRemaining(((_items$next2 = items[next]) === null || _items$next2 === void 0 ? void 0 : _items$next2.duration) || 0);\n      return next;\n    });\n  };\n  return {\n    current: items[index] || null,\n    index,\n    remaining,\n    paused,\n    skip,\n    setPaused\n  };\n}\n_s(usePlaylistPlayer, \"R4eQOrpH3GF7fzRtTLgHHphVs04=\");","map":{"version":3,"names":["useEffect","useState","useRef","usePlaylistPlayer","items","_s","index","setIndex","remaining","setRemaining","paused","setPaused","timerRef","_items$","length","duration","current","setInterval","prev","i","_items$next","next","clearInterval","skip","_items$next2"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/hooks/usePlaylistPlayer.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\n\nexport default function usePlaylistPlayer(items = []) {\n  const [index, setIndex] = useState(0);\n  const [remaining, setRemaining] = useState(0);\n  const [paused, setPaused] = useState(false);\n\n  const timerRef = useRef(null);\n\n  /* RESET WHEN PLAYLIST CHANGES */\n  useEffect(() => {\n    if (!items.length) return;\n\n    setIndex(0);\n    setRemaining(items[0]?.duration || 0);\n    setPaused(false);\n  }, [items]);\n\n  /* PLAYBACK TIMER */\n  useEffect(() => {\n    if (paused || !items.length) return;\n\n    timerRef.current = setInterval(() => {\n      setRemaining(prev => {\n        if (prev <= 1) {\n          setIndex(i => {\n            const next = (i + 1) % items.length;\n            setRemaining(items[next]?.duration || 0);\n            return next;\n          });\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timerRef.current);\n  }, [paused, items]);\n\n  /* MANUAL SKIP */\n  const skip = () => {\n    if (!items.length) return;\n\n    setIndex(i => {\n      const next = (i + 1) % items.length;\n      setRemaining(items[next]?.duration || 0);\n      return next;\n    });\n  };\n\n  return {\n    current: items[index] || null,\n    index,\n    remaining,\n    paused,\n    skip,\n    setPaused\n  };\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAEnD,eAAe,SAASC,iBAAiBA,CAACC,KAAK,GAAG,EAAE,EAAE;EAAAC,EAAA;EACpD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE3C,MAAMW,QAAQ,GAAGV,MAAM,CAAC,IAAI,CAAC;;EAE7B;EACAF,SAAS,CAAC,MAAM;IAAA,IAAAa,OAAA;IACd,IAAI,CAACT,KAAK,CAACU,MAAM,EAAE;IAEnBP,QAAQ,CAAC,CAAC,CAAC;IACXE,YAAY,CAAC,EAAAI,OAAA,GAAAT,KAAK,CAAC,CAAC,CAAC,cAAAS,OAAA,uBAARA,OAAA,CAAUE,QAAQ,KAAI,CAAC,CAAC;IACrCJ,SAAS,CAAC,KAAK,CAAC;EAClB,CAAC,EAAE,CAACP,KAAK,CAAC,CAAC;;EAEX;EACAJ,SAAS,CAAC,MAAM;IACd,IAAIU,MAAM,IAAI,CAACN,KAAK,CAACU,MAAM,EAAE;IAE7BF,QAAQ,CAACI,OAAO,GAAGC,WAAW,CAAC,MAAM;MACnCR,YAAY,CAACS,IAAI,IAAI;QACnB,IAAIA,IAAI,IAAI,CAAC,EAAE;UACbX,QAAQ,CAACY,CAAC,IAAI;YAAA,IAAAC,WAAA;YACZ,MAAMC,IAAI,GAAG,CAACF,CAAC,GAAG,CAAC,IAAIf,KAAK,CAACU,MAAM;YACnCL,YAAY,CAAC,EAAAW,WAAA,GAAAhB,KAAK,CAACiB,IAAI,CAAC,cAAAD,WAAA,uBAAXA,WAAA,CAAaL,QAAQ,KAAI,CAAC,CAAC;YACxC,OAAOM,IAAI;UACb,CAAC,CAAC;UACF,OAAO,CAAC;QACV;QACA,OAAOH,IAAI,GAAG,CAAC;MACjB,CAAC,CAAC;IACJ,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAMI,aAAa,CAACV,QAAQ,CAACI,OAAO,CAAC;EAC9C,CAAC,EAAE,CAACN,MAAM,EAAEN,KAAK,CAAC,CAAC;;EAEnB;EACA,MAAMmB,IAAI,GAAGA,CAAA,KAAM;IACjB,IAAI,CAACnB,KAAK,CAACU,MAAM,EAAE;IAEnBP,QAAQ,CAACY,CAAC,IAAI;MAAA,IAAAK,YAAA;MACZ,MAAMH,IAAI,GAAG,CAACF,CAAC,GAAG,CAAC,IAAIf,KAAK,CAACU,MAAM;MACnCL,YAAY,CAAC,EAAAe,YAAA,GAAApB,KAAK,CAACiB,IAAI,CAAC,cAAAG,YAAA,uBAAXA,YAAA,CAAaT,QAAQ,KAAI,CAAC,CAAC;MACxC,OAAOM,IAAI;IACb,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLL,OAAO,EAAEZ,KAAK,CAACE,KAAK,CAAC,IAAI,IAAI;IAC7BA,KAAK;IACLE,SAAS;IACTE,MAAM;IACNa,IAAI;IACJZ;EACF,CAAC;AACH;AAACN,EAAA,CAxDuBF,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
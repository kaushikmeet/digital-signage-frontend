{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\PlaylistBuilder.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PlaylistBuilder({\n  playlistId\n}) {\n  _s();\n  const [media, setMedia] = useState([]);\n  const [items, setItems] = useState([]);\n  const [mediaId, setMediaId] = useState(\"\");\n  const [duration, setDuration] = useState(10);\n  const [file, setFile] = useState(null);\n\n  /* LOAD MEDIA LIBRARY */\n  useEffect(() => {\n    api.get(\"/media\").then(res => setMedia(res.data));\n  }, []);\n\n  /* LOAD PLAYLIST ITEMS */\n  useEffect(() => {\n    if (!playlistId) return;\n    loadItems();\n  }, [playlistId]);\n  async function loadItems() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n\n  /* UPLOAD MEDIA */\n  async function uploadMedia() {\n    if (!file) return alert(\"Select a file\");\n    try {\n      const form = new FormData();\n      form.append(\"file\", file); // ðŸ”´ MUST be \"file\"\n\n      await api.post(\"/media/upload\", form);\n      setFile(null);\n      const res = await api.get(\"/media\");\n      setMedia(res.data);\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error(\"UPLOAD ERROR:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || \"Upload failed\");\n    }\n  }\n\n  /* ADD TO PLAYLIST */\n  async function addToPlaylist() {\n    if (!mediaId) return alert(\"Select media\");\n    await api.post(\"/playlists/items\", {\n      playlistId,\n      mediaId,\n      duration: Number(duration),\n      position: Date.now()\n    });\n    setMediaId(\"\");\n    loadItems();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-3 bg-gray-50 p-3 rounded\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*,video/*\",\n        onChange: e => setFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: uploadMedia,\n        className: \"text-sm text-blue-600\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"border p-2 rounded\",\n        value: mediaId,\n        onChange: e => setMediaId(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select Media\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), media.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: m._id,\n          children: [m.filename, \" (\", m.type, \")\"]\n        }, m._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        className: \"border p-2 w-20\",\n        value: duration,\n        onChange: e => setDuration(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addToPlaylist,\n        className: \"bg-indigo-600 text-white px-3 rounded\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: items.map(i => {\n        var _i$mediaId;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 text-sm\",\n          children: [i.mediaId ? i.mediaId.type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: i.mediaId.url,\n            className: \"w-16 h-10 object-cover rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n            src: i.mediaId.url,\n            className: \"w-16 h-10 rounded\",\n            muted: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 text-xs\",\n            children: \"Media missing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: ((_i$mediaId = i.mediaId) === null || _i$mediaId === void 0 ? void 0 : _i$mediaId.filename) || \"Unknown file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: [i.duration, \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, i._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(PlaylistBuilder, \"Bh6E2DA13ySu76t0LfdbcWP5Abc=\");\n_c = PlaylistBuilder;\nvar _c;\n$RefreshReg$(_c, \"PlaylistBuilder\");","map":{"version":3,"names":["useEffect","useState","api","jsxDEV","_jsxDEV","PlaylistBuilder","playlistId","_s","media","setMedia","items","setItems","mediaId","setMediaId","duration","setDuration","file","setFile","get","then","res","data","loadItems","uploadMedia","alert","form","FormData","append","post","err","_err$response","_err$response2","_err$response2$data","console","error","response","message","addToPlaylist","Number","position","Date","now","className","children","type","accept","onChange","e","target","files","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","map","m","_id","filename","i","_i$mediaId","src","url","muted","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/PlaylistBuilder.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\n\nexport default function PlaylistBuilder({ playlistId }) {\n  const [media, setMedia] = useState([]);\n  const [items, setItems] = useState([]);\n  const [mediaId, setMediaId] = useState(\"\");\n  const [duration, setDuration] = useState(10);\n  const [file, setFile] = useState(null);\n\n  /* LOAD MEDIA LIBRARY */\n  useEffect(() => {\n    api.get(\"/media\").then((res) => setMedia(res.data));\n  }, []);\n\n  /* LOAD PLAYLIST ITEMS */\n  useEffect(() => {\n    if (!playlistId) return;\n    loadItems();\n  }, [playlistId]);\n\n  async function loadItems() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n\n  /* UPLOAD MEDIA */\nasync function uploadMedia() {\n  if (!file) return alert(\"Select a file\");\n\n  try {\n    const form = new FormData();\n    form.append(\"file\", file); // ðŸ”´ MUST be \"file\"\n\n    await api.post(\"/media/upload\", form);\n\n    setFile(null);\n\n    const res = await api.get(\"/media\");\n    setMedia(res.data);\n  } catch (err) {\n    console.error(\"UPLOAD ERROR:\", err.response?.data || err.message);\n    alert(err.response?.data?.error || \"Upload failed\");\n  }\n}\n\n  /* ADD TO PLAYLIST */\n  async function addToPlaylist() {\n    if (!mediaId) return alert(\"Select media\");\n\n    await api.post(\"/playlists/items\", {\n      playlistId,\n      mediaId,\n      duration: Number(duration),\n      position: Date.now(),\n    });\n\n    setMediaId(\"\");\n    loadItems();\n  }\n\n  return (\n    <div className=\"space-y-3 bg-gray-50 p-3 rounded\">\n      {/* Upload */}\n      <div className=\"flex gap-2\">\n        <input type=\"file\"  accept=\"image/*,video/*\" onChange={(e) => setFile(e.target.files[0])} />\n        <button onClick={uploadMedia} className=\"text-sm text-blue-600\">\n          Upload\n        </button>\n      </div>\n\n      {/* Add media */}\n      <div className=\"flex gap-2\">\n        <select\n          className=\"border p-2 rounded\"\n          value={mediaId}\n          onChange={(e) => setMediaId(e.target.value)}\n        >\n          <option value=\"\">Select Media</option>\n          {media.map((m) => (\n            <option key={m._id} value={m._id}>\n              {m.filename} ({m.type})\n            </option>\n          ))}\n        </select>\n\n        <input\n          type=\"number\"\n          className=\"border p-2 w-20\"\n          value={duration}\n          onChange={(e) => setDuration(e.target.value)}\n        />\n\n        <button\n          onClick={addToPlaylist}\n          className=\"bg-indigo-600 text-white px-3 rounded\"\n        >\n          Add\n        </button>\n      </div>\n\n      {/* PLAYLIST ITEMS */}\n      <div className=\"space-y-2\">\n        {items.map((i) => (\n          <div key={i._id} className=\"flex items-center gap-3 text-sm\">\n            {i.mediaId ? (\n              i.mediaId.type === \"image\" ? (\n                <img\n                  src={i.mediaId.url}\n                  className=\"w-16 h-10 object-cover rounded\"\n                />\n              ) : (\n                <video\n                  src={i.mediaId.url}\n                  className=\"w-16 h-10 rounded\"\n                  muted\n                />\n              )\n            ) : (\n              <span className=\"text-red-500 text-xs\">Media missing</span>\n            )}\n\n            <span>{i.mediaId?.filename || \"Unknown file\"}</span>\n            <span className=\"text-gray-500\">{i.duration}s</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
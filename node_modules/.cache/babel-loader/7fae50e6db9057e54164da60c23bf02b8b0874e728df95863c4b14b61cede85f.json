{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\ZonePlayer.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport api from \"../api/services\";\nimport usePlaylistPlayer from \"../hooks/usePlaylistPlayer\";\nimport ZoneContentResolver from \"./ZoneContentResolver\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ZonePlayer({\n  screenId,\n  zone\n}) {\n  _s();\n  const [playlistItems, setPlaylistItems] = useState([]);\n  const [fallbackMedia, setFallbackMedia] = useState(null);\n  const loggedRef = useRef(null);\n\n  /* ---------------- LOAD PLAYLIST ITEMS ---------------- */\n\n  useEffect(() => {\n    if (!zone.playlistId) {\n      setPlaylistItems([]);\n      return;\n    }\n    api.get(`/playlists/${zone.playlistId}/active-items`).then(res => setPlaylistItems(res.data || [])).catch(() => setPlaylistItems([]));\n  }, [zone.playlistId]);\n\n  /* ---------------- LOAD FALLBACK MEDIA ---------------- */\n\n  useEffect(() => {\n    if (!zone.fallbackMediaId) {\n      setFallbackMedia(null);\n      return;\n    }\n    api.get(`/media/${zone.fallbackMediaId}`).then(res => setFallbackMedia(res.data)).catch(() => setFallbackMedia(null));\n  }, [zone.fallbackMediaId]);\n\n  /* ---------------- PLAYLIST PLAYER ---------------- */\n\n  const itemsToPlay = playlistItems.length ? playlistItems : fallbackMedia ? [{\n    mediaId: fallbackMedia\n  }] : [];\n  const {\n    current\n  } = usePlaylistPlayer(itemsToPlay);\n\n  /* ---------------- ANALYTICS ---------------- */\n\n  useEffect(() => {\n    var _current$mediaId;\n    if (!(current !== null && current !== void 0 && (_current$mediaId = current.mediaId) !== null && _current$mediaId !== void 0 && _current$mediaId._id)) return;\n    if (loggedRef.current === current.mediaId._id) return;\n    loggedRef.current = current.mediaId._id;\n    api.post(\"/analytics/log\", {\n      screenId,\n      zoneId: zone._id,\n      mediaId: current.mediaId._id\n    }).catch(() => {});\n  }, [current, screenId, zone._id]);\n\n  /* ---------------- RENDER ---------------- */\n\n  return /*#__PURE__*/_jsxDEV(ZoneContentResolver, {\n    zone: zone,\n    current: current,\n    playlistItems: playlistItems,\n    fallbackMedia: fallbackMedia\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(ZonePlayer, \"B0oYZSSwUxA8igY64HVrBndht2Q=\", false, function () {\n  return [usePlaylistPlayer];\n});\n_c = ZonePlayer;\nvar _c;\n$RefreshReg$(_c, \"ZonePlayer\");","map":{"version":3,"names":["useEffect","useRef","useState","api","usePlaylistPlayer","ZoneContentResolver","jsxDEV","_jsxDEV","ZonePlayer","screenId","zone","_s","playlistItems","setPlaylistItems","fallbackMedia","setFallbackMedia","loggedRef","playlistId","get","then","res","data","catch","fallbackMediaId","itemsToPlay","length","mediaId","current","_current$mediaId","_id","post","zoneId","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/ZonePlayer.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport api from \"../api/services\";\nimport usePlaylistPlayer from \"../hooks/usePlaylistPlayer\";\nimport ZoneContentResolver from \"./ZoneContentResolver\";\n\nexport default function ZonePlayer({\n  screenId,\n  zone\n}) {\n  const [playlistItems, setPlaylistItems] = useState([]);\n  const [fallbackMedia, setFallbackMedia] = useState(null);\n  const loggedRef = useRef(null);\n\n  /* ---------------- LOAD PLAYLIST ITEMS ---------------- */\n\n  useEffect(() => {\n    if (!zone.playlistId) {\n      setPlaylistItems([]);\n      return;\n    }\n\n    api\n      .get(`/playlists/${zone.playlistId}/active-items`)\n      .then(res => setPlaylistItems(res.data || []))\n      .catch(() => setPlaylistItems([]));\n  }, [zone.playlistId]);\n\n  /* ---------------- LOAD FALLBACK MEDIA ---------------- */\n\n  useEffect(() => {\n    if (!zone.fallbackMediaId) {\n      setFallbackMedia(null);\n      return;\n    }\n\n    api\n      .get(`/media/${zone.fallbackMediaId}`)\n      .then(res => setFallbackMedia(res.data))\n      .catch(() => setFallbackMedia(null));\n  }, [zone.fallbackMediaId]);\n\n  /* ---------------- PLAYLIST PLAYER ---------------- */\n\n  const itemsToPlay =\n    playlistItems.length\n      ? playlistItems\n      : fallbackMedia\n        ? [{ mediaId: fallbackMedia }]\n        : [];\n\n  const { current } = usePlaylistPlayer(itemsToPlay);\n\n  /* ---------------- ANALYTICS ---------------- */\n\n  useEffect(() => {\n    if (!current?.mediaId?._id) return;\n    if (loggedRef.current === current.mediaId._id) return;\n\n    loggedRef.current = current.mediaId._id;\n\n    api.post(\"/analytics/log\", {\n      screenId,\n      zoneId: zone._id,\n      mediaId: current.mediaId._id\n    }).catch(() => {});\n  }, [current, screenId, zone._id]);\n\n  /* ---------------- RENDER ---------------- */\n\n  return (\n    <ZoneContentResolver\n      zone={zone}\n      current={current}\n      playlistItems={playlistItems}\n      fallbackMedia={fallbackMedia}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
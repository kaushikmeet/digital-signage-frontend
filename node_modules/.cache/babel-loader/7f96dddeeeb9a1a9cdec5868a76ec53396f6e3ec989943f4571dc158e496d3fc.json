{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\PlaylistBuilder.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport socket from \"../utils/socket\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PlaylistBuilder({\n  playlistId\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [dragIndex, setDragIndex] = useState(null);\n  async function load() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n  useEffect(() => {\n    if (!playlistId) return;\n    socket.emit(\"register-playlist\", playlistId);\n    load();\n    socket.on(\"playlist-updated\", ({\n      playlistId: id\n    }) => {\n      if (id === playlistId) load();\n    });\n    return () => socket.off(\"playlist-updated\");\n  }, [playlistId]);\n  function moveItem(target) {\n    const updated = [...items];\n    const [moved] = updated.splice(dragIndex, 1);\n    updated.splice(target, 0, moved);\n    setItems(updated);\n    api.post(\"/playlists/reorder\", {\n      playlistId,\n      items: updated.map((i, idx) => ({\n        id: i._id,\n        position: idx\n      }))\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: items.map((i, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      draggable: true,\n      onDragStart: () => setDragIndex(index),\n      onDragOver: e => e.preventDefault(),\n      onDrop: () => moveItem(index),\n      className: \"border p-2 mb-1 cursor-move\",\n      children: !i.mediaId ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-500 text-xs\",\n        children: \"Media missing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: i.mediaId.filename\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-500\",\n          children: [i.duration, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, i._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(PlaylistBuilder, \"2TywrsiHk9IyakbgQK34fFL9K+E=\");\n_c = PlaylistBuilder;\nvar _c;\n$RefreshReg$(_c, \"PlaylistBuilder\");","map":{"version":3,"names":["useEffect","useState","api","socket","jsxDEV","_jsxDEV","Fragment","_Fragment","PlaylistBuilder","playlistId","_s","items","setItems","dragIndex","setDragIndex","load","res","get","data","emit","on","id","off","moveItem","target","updated","moved","splice","post","map","i","idx","_id","position","children","index","draggable","onDragStart","onDragOver","e","preventDefault","onDrop","className","mediaId","fileName","_jsxFileName","lineNumber","columnNumber","filename","duration","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/PlaylistBuilder.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport socket  from \"../utils/socket\";\n\nexport default function PlaylistBuilder({ playlistId }) {\n  const [items, setItems] = useState([]);\n  const [dragIndex, setDragIndex] = useState(null);\n\n  async function load() {\n    const res = await api.get(`/playlists/${playlistId}/items`);\n    setItems(res.data);\n  }\n\n  useEffect(() => {\n    if (!playlistId) return;\n    socket.emit(\"register-playlist\", playlistId);\n    load();\n\n    socket.on(\"playlist-updated\", ({ playlistId: id }) => {\n      if (id === playlistId) load();\n    });\n\n    return () => socket.off(\"playlist-updated\");\n  }, [playlistId]);\n\n  function moveItem(target) {\n    const updated = [...items];\n    const [moved] = updated.splice(dragIndex, 1);\n    updated.splice(target, 0, moved);\n    setItems(updated);\n\n    api.post(\"/playlists/reorder\", {\n      playlistId,\n      items: updated.map((i, idx) => ({\n        id: i._id,\n        position: idx\n      }))\n    });\n  }\n\n  return (\n    <div>\n      {items.map((i, index) => (\n        <div\n          key={i._id}\n          draggable\n          onDragStart={() => setDragIndex(index)}\n          onDragOver={e => e.preventDefault()}\n          onDrop={() => moveItem(index)}\n          className=\"border p-2 mb-1 cursor-move\"\n        >\n          {!i.mediaId ? (\n            <span className=\"text-red-500 text-xs\">\n              Media missing\n            </span>\n          ) : (\n            <>\n              <span>{i.mediaId.filename}</span>\n              <span className=\"text-gray-500\">{i.duration}s</span>\n            </>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\Sidebar.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport MediaItem from \"./MediaItem\";\nimport socket from \"../utils/socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Sidebar({\n  SelectedScreen\n}) {\n  _s();\n  const [screens, setScreens] = useState([]);\n  const [openScreen, setOpenScreen] = useState(null);\n  async function loadScreens() {\n    try {\n      const res = await api.get(\"/screens\");\n      setScreens(res.data || []);\n    } catch (err) {\n      console.error(\"Failed to load screens\", err);\n    }\n  }\n  useEffect(() => {\n    loadScreens();\n  }, []);\n  useEffect(() => {\n    if (!socket) return;\n    console.log(\"ðŸŸ¢ Sidebar socket connected\");\n    socket.on(\"playlist-updated\", () => {\n      console.log(\"ðŸ”„ Sidebar refresh via socket\");\n      loadScreens();\n    });\n    return () => {\n      socket.off(\"playlist-updated\");\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"aside\", {\n    className: \"w-72 bg-slate-900 text-white h-screen overflow-y-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"p-4 font-semibold text-lg border-b border-slate-700\",\n      children: \"Screens\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), screens.map(screen => {\n      var _screen$playlist, _screen$playlist2, _screen$playlist2$ite, _screen$playlist3, _screen$playlist3$ite;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-b border-slate-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setOpenScreen(openScreen === screen._id ? null : screen._id),\n          className: \"w-full text-left px-4 py-3 hover:bg-slate-800\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: screen.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-slate-400\",\n            children: ((_screen$playlist = screen.playlist) === null || _screen$playlist === void 0 ? void 0 : _screen$playlist.name) || \"No playlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), openScreen === screen._id && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-slate-800 px-3 py-2 space-y-2\",\n          children: [!((_screen$playlist2 = screen.playlist) !== null && _screen$playlist2 !== void 0 && (_screen$playlist2$ite = _screen$playlist2.items) !== null && _screen$playlist2$ite !== void 0 && _screen$playlist2$ite.length) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-slate-400\",\n            children: \"No media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this), (_screen$playlist3 = screen.playlist) === null || _screen$playlist3 === void 0 ? void 0 : (_screen$playlist3$ite = _screen$playlist3.items) === null || _screen$playlist3$ite === void 0 ? void 0 : _screen$playlist3$ite.map(item => /*#__PURE__*/_jsxDEV(MediaItem, {\n            item: item\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, screen._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Sidebar, \"dtpUmJcym2/ClM8Q/VdtsostQUQ=\");\n_c = Sidebar;\nvar _c;\n$RefreshReg$(_c, \"Sidebar\");","map":{"version":3,"names":["useEffect","useState","api","MediaItem","socket","jsxDEV","_jsxDEV","Sidebar","SelectedScreen","_s","screens","setScreens","openScreen","setOpenScreen","loadScreens","res","get","data","err","console","error","log","on","off","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","screen","_screen$playlist","_screen$playlist2","_screen$playlist2$ite","_screen$playlist3","_screen$playlist3$ite","onClick","_id","name","playlist","items","length","item","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/Sidebar.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport MediaItem from \"./MediaItem\";\nimport socket from \"../utils/socket\";\n\nexport default function Sidebar({SelectedScreen}) {\n  const [screens, setScreens] = useState([]);\n  const [openScreen, setOpenScreen] = useState(null);\n\n async function loadScreens() {\n  try {\n    const res = await api.get(\"/screens\");\n    setScreens(res.data || []);\n  } catch (err) {\n    console.error(\"Failed to load screens\", err);\n  }\n}\n\n  useEffect(() => {\n    loadScreens();\n  }, []);\n\n  useEffect(() => {\n  if (!socket) return;\n\n  console.log(\"ðŸŸ¢ Sidebar socket connected\");\n\n  socket.on(\"playlist-updated\", () => {\n    console.log(\"ðŸ”„ Sidebar refresh via socket\");\n    loadScreens();\n  });\n\n  return () => {\n    socket.off(\"playlist-updated\");\n  };\n}, []);\n\n  return (\n    <aside className=\"w-72 bg-slate-900 text-white h-screen overflow-y-auto\">\n      <h2 className=\"p-4 font-semibold text-lg border-b border-slate-700\">\n        Screens\n      </h2>\n\n      {screens.map(screen => (\n        <div key={screen._id} className=\"border-b border-slate-800\">\n\n          {/* SCREEN HEADER */}\n          <button\n            onClick={() =>\n              setOpenScreen(openScreen === screen._id ? null : screen._id)\n            }\n            className=\"w-full text-left px-4 py-3 hover:bg-slate-800\"\n          >\n            <p className=\"font-medium\">{screen.name}</p>\n            <p className=\"text-xs text-slate-400\">\n              {screen.playlist?.name || \"No playlist\"}\n            </p>\n          </button>\n\n          {/* PLAYLIST ITEMS */}\n          {openScreen === screen._id && (\n            <div className=\"bg-slate-800 px-3 py-2 space-y-2\">\n              {!screen.playlist?.items?.length && (\n                <p className=\"text-xs text-slate-400\">No media</p>\n              )}\n\n              {screen.playlist?.items?.map(item => (\n                <MediaItem key={item._id} item={item} />\n              ))}\n            </div>\n          )}\n        </div>\n      ))}\n    </aside>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
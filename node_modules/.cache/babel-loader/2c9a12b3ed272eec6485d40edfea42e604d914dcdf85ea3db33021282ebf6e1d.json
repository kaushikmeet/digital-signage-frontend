{"ast":null,"code":"var _jsxFileName = \"D:\\\\digital-sinagae-project\\\\project\\\\frontend\\\\digital-signage\\\\src\\\\components\\\\ZonePlayer.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport usePlaylistPlayer from \"../hooks/usePlaylistPlayer\";\nimport MediaPlayer from \"./MediaPlayer\";\nimport LiveWidgetRenderer from \"./LiveWidgetRenderer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ZonePlayer({\n  zone,\n  activeTimelinePlaylistId // ⬅️ pass playlistId, not object\n}) {\n  _s();\n  var _ref;\n  const [playlistItems, setPlaylistItems] = useState([]);\n  const [fallback, setFallback] = useState(null);\n\n  /* ---------- PLAYLIST RESOLUTION ---------- */\n  const playlistId = (_ref = activeTimelinePlaylistId !== null && activeTimelinePlaylistId !== void 0 ? activeTimelinePlaylistId : zone === null || zone === void 0 ? void 0 : zone.playlistId) !== null && _ref !== void 0 ? _ref : null;\n\n  /* ---------- LOAD PLAYLIST ITEMS ---------- */\n  useEffect(() => {\n    if (!playlistId || zone !== null && zone !== void 0 && zone.widget) return;\n    api.get(`/playlists/${playlistId}/active-items`).then(res => setPlaylistItems(res.data || [])).catch(() => setPlaylistItems([]));\n  }, [playlistId, zone === null || zone === void 0 ? void 0 : zone.widget]);\n\n  /* ---------- LOAD FALLBACK MEDIA ---------- */\n  useEffect(() => {\n    if (!(zone !== null && zone !== void 0 && zone.fallbackMediaId)) {\n      setFallback(null);\n      return;\n    }\n    api.get(`/media/${zone.fallbackMediaId}`).then(res => setFallback(res.data)).catch(() => setFallback(null));\n  }, [zone === null || zone === void 0 ? void 0 : zone.fallbackMediaId]);\n\n  /* ---------- BUILD PLAY QUEUE ---------- */\n  const itemsToPlay = playlistItems.length ? playlistItems : fallback ? [{\n    mediaId: fallback\n  }] : [];\n  const {\n    current\n  } = usePlaylistPlayer(itemsToPlay);\n\n  /* ---------- RENDER PRIORITY ---------- */\n\n  // 1️⃣ Widget overrides everything\n  if (zone !== null && zone !== void 0 && zone.widget) {\n    return /*#__PURE__*/_jsxDEV(LiveWidgetRenderer, {\n      widget: zone.widget\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n\n  // 2️⃣ Playlist / fallback media\n  if (current !== null && current !== void 0 && current.mediaId) {\n    return /*#__PURE__*/_jsxDEV(MediaPlayer, {\n      media: current.mediaId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }, this);\n  }\n\n  // 3️⃣ Empty state (IMPORTANT)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-full flex items-center justify-center text-xs text-gray-400\",\n    children: \"No content assigned\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(ZonePlayer, \"5hPs2On9oEvbXQVCSUj7MQi5d0s=\", false, function () {\n  return [usePlaylistPlayer];\n});\n_c = ZonePlayer;\nvar _c;\n$RefreshReg$(_c, \"ZonePlayer\");","map":{"version":3,"names":["useEffect","useState","api","usePlaylistPlayer","MediaPlayer","LiveWidgetRenderer","jsxDEV","_jsxDEV","ZonePlayer","zone","activeTimelinePlaylistId","_s","_ref","playlistItems","setPlaylistItems","fallback","setFallback","playlistId","widget","get","then","res","data","catch","fallbackMediaId","itemsToPlay","length","mediaId","current","fileName","_jsxFileName","lineNumber","columnNumber","media","className","children","_c","$RefreshReg$"],"sources":["D:/digital-sinagae-project/project/frontend/digital-signage/src/components/ZonePlayer.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport api from \"../api/services\";\nimport usePlaylistPlayer from \"../hooks/usePlaylistPlayer\";\nimport MediaPlayer from \"./MediaPlayer\";\nimport LiveWidgetRenderer from \"./LiveWidgetRenderer\";\n\nexport default function ZonePlayer({\n  zone,\n  activeTimelinePlaylistId // ⬅️ pass playlistId, not object\n}) {\n  const [playlistItems, setPlaylistItems] = useState([]);\n  const [fallback, setFallback] = useState(null);\n\n  /* ---------- PLAYLIST RESOLUTION ---------- */\n  const playlistId =\n    activeTimelinePlaylistId ??\n    zone?.playlistId ??\n    null;\n\n  /* ---------- LOAD PLAYLIST ITEMS ---------- */\n  useEffect(() => {\n    if (!playlistId || zone?.widget) return;\n\n    api\n      .get(`/playlists/${playlistId}/active-items`)\n      .then(res => setPlaylistItems(res.data || []))\n      .catch(() => setPlaylistItems([]));\n  }, [playlistId, zone?.widget]);\n\n  /* ---------- LOAD FALLBACK MEDIA ---------- */\n  useEffect(() => {\n    if (!zone?.fallbackMediaId) {\n      setFallback(null);\n      return;\n    }\n\n    api\n      .get(`/media/${zone.fallbackMediaId}`)\n      .then(res => setFallback(res.data))\n      .catch(() => setFallback(null));\n  }, [zone?.fallbackMediaId]);\n\n  /* ---------- BUILD PLAY QUEUE ---------- */\n  const itemsToPlay =\n    playlistItems.length\n      ? playlistItems\n      : fallback\n      ? [{ mediaId: fallback }]\n      : [];\n\n  const { current } = usePlaylistPlayer(itemsToPlay);\n\n  /* ---------- RENDER PRIORITY ---------- */\n\n  // 1️⃣ Widget overrides everything\n  if (zone?.widget) {\n    return <LiveWidgetRenderer widget={zone.widget} />;\n  }\n\n  // 2️⃣ Playlist / fallback media\n  if (current?.mediaId) {\n    return <MediaPlayer media={current.mediaId} />;\n  }\n\n  // 3️⃣ Empty state (IMPORTANT)\n  return (\n    <div className=\"w-full h-full flex items-center justify-center text-xs text-gray-400\">\n      No content assigned\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}